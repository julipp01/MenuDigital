import{r as l,j as e,a as L}from"./index-rCFzjzOM.js";import{T as m}from"./ThreeDViewer-D_2-KNhV.js";const n="http://192.168.18.22:5000",B=({restaurantId:x})=>{const[h,C]=l.useState([]),[g,M]=l.useState("Mi Restaurante"),[u,_]=l.useState(null),[o,I]=l.useState({primary:"#FF9800",secondary:"#4CAF50"}),[p,f]=l.useState({}),[R,j]=l.useState(!0),[r,b]=l.useState(null),[c,y]=l.useState(null),[w,N]=l.useState(!1),E=l.useRef(null);l.useEffect(()=>{(async()=>{j(!0);try{const a=await L.get(`/menu/${x}`);console.log("Respuesta de /menu:",a.data);const t=a.data.restaurant||{};M(t.name||"Mi Restaurante"),_(t.logo_url||null),I(t.colors||{primary:"#FF9800",secondary:"#4CAF50"});const d=t.sections||{"Platos Principales":[],Postres:[],Bebidas:[]};f(d),y("Más Vendidos");const V=(a.data.items||[]).map(i=>({...i,image_url:i.image_url&&i.image_url.startsWith("http")?i.image_url.replace(n,""):i.image_url,category:i.category||"Platos Principales"}));C(V)}catch(a){console.error("[MenuViewer] Error cargando datos:",a.response?.data||a.message),f({"Platos Principales":[],Postres:[],Bebidas:[]})}finally{j(!1)}})()},[x]);const v=s=>b(s),k=()=>b(null),S=s=>{y(s),document.getElementById(s.replace(/\s+/g,"-").toLowerCase())?.scrollIntoView({behavior:"smooth"}),N(!1)},P=h.slice(0,3);return R?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-indigo-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-xl p-6 z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col items-center text-center",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[u&&e.jsx("img",{src:n+u,alt:g,className:"w-16 h-16 rounded-full shadow-lg mr-4",onError:s=>s.target.src="/fallback-logo.png"}),e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",style:{color:o.primary},children:g})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((s,a)=>e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.97c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.97a1 1 0 00-.364-1.118L2.074 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},a))}),e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"4.8 (120 reseñas)"})]})]})}),e.jsxs("div",{className:"pt-32 pb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("nav",{ref:E,className:`fixed left-0 right-0 top-20 bg-white shadow-lg z-10 transition-all duration-300 ${w?"block":"hidden md:block"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex md:flex-row flex-col gap-2 overflow-x-auto scrollbar-hide",children:[e.jsx("button",{onClick:()=>S("Más Vendidos"),className:`flex-shrink-0 px-6 py-2 text-base font-semibold rounded-full shadow-md transition-all duration-200 ${c==="Más Vendidos"?"text-white scale-105":"text-gray-700 hover:text-white hover:bg-opacity-90"}`,style:{backgroundColor:c==="Más Vendidos"?o.primary:o.primary+"20"},children:"Más Vendidos"}),Object.keys(p).map(s=>e.jsx("button",{onClick:()=>S(s),className:`flex-shrink-0 px-6 py-2 text-base font-semibold rounded-full shadow-md transition-all duration-200 ${c===s?"text-white scale-105":"text-gray-700 hover:text-white hover:bg-opacity-90"}`,style:{backgroundColor:c===s?o.primary:o.primary+"20"},children:s},s))]})}),e.jsx("button",{className:"fixed top-20 right-4 md:hidden p-3 bg-white rounded-full shadow-lg z-20",onClick:()=>N(!w),children:e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})}),e.jsxs("section",{id:"mas-vendidos",className:"mb-16 mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Más Vendidos"}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:P.map(s=>{const a=s.image_url||s.imageUrl;return e.jsxs("li",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 cursor-pointer",onClick:()=>v(s),children:[e.jsxs("div",{className:"relative",children:[a?a.endsWith(".glb")?e.jsx("div",{className:"w-full h-48",children:e.jsx(m,{modelUrl:n+a,autoRotate:!0})}):e.jsx("img",{src:n+a,alt:s.name,className:"w-full h-48 object-cover",onError:t=>t.target.src="/fallback-image.png"}):e.jsx("div",{className:"w-full h-48 flex items-center justify-center bg-gray-200 text-gray-500",children:"Sin Imagen"}),e.jsxs("span",{className:"absolute top-2 right-2 px-3 py-1 text-sm font-medium text-white rounded-full shadow",style:{backgroundColor:o.secondary},children:["S/. ",s.price]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description})]})]},s.id||s.name)})})]}),e.jsx("main",{className:"mt-8",children:Object.keys(p).map(s=>e.jsxs("section",{id:s.replace(/\s+/g,"-").toLowerCase(),className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:s}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:h.filter(a=>a.category===s).map(a=>{const t=a.image_url||a.imageUrl;return e.jsxs("li",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 cursor-pointer",onClick:()=>v(a),children:[e.jsxs("div",{className:"relative",children:[t?t.endsWith(".glb")?e.jsx("div",{className:"w-full h-48",children:e.jsx(m,{modelUrl:n+t,autoRotate:!0})}):e.jsx("img",{src:n+t,alt:a.name,className:"w-full h-48 object-cover",onError:d=>d.target.src="/fallback-image.png"}):e.jsx("div",{className:"w-full h-48 flex items-center justify-center bg-gray-200 text-gray-500",children:"Sin Imagen"}),e.jsxs("span",{className:"absolute top-2 right-2 px-3 py-1 text-sm font-medium text-white rounded-full shadow",style:{backgroundColor:o.secondary},children:["S/. ",a.price]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description})]})]},a.id||a.name)})})]},s))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",onClick:k,children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-lg w-full mx-4 shadow-2xl transform transition-all duration-300 scale-100 hover:scale-102",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:o.primary},children:r.name}),e.jsx("button",{onClick:k,className:"text-gray-500 hover:text-gray-700 text-3xl font-bold",children:"×"})]}),r.image_url?r.image_url.endsWith(".glb")?e.jsx("div",{className:"w-full h-80",children:e.jsx(m,{modelUrl:n+r.image_url,autoRotate:!0})}):e.jsx("img",{src:n+r.image_url,alt:r.name,className:"w-full h-80 object-cover rounded-xl mb-6",onError:s=>s.target.src="/fallback-image.png"}):e.jsx("div",{className:"w-full h-80 flex items-center justify-center bg-gray-200 rounded-xl text-gray-500",children:"Sin Imagen"}),e.jsx("p",{className:"text-gray-700 text-base mb-6",children:r.description}),e.jsxs("p",{className:"text-xl font-semibold",style:{color:o.secondary},children:["S/. ",r.price]}),e.jsx("button",{onClick:()=>alert(`Añadido al pedido: ${r.name}`),className:"mt-6 w-full py-4 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-xl shadow-lg hover:from-indigo-700 hover:to-indigo-800 transition-all duration-200 text-lg font-medium",children:"Añadir al Pedido"})]})})]})};export{B as default};
//# sourceMappingURL=MenuViewer-tAJ4EX5N.js.map
